# 2018—GBFS 调研报告
## 标签文件系统
“标签”，有时也叫“关键字”，可以是任意的字符串，⽤来组织⼀组对象。“加标签”(tagging) 通常是⼀种与“层次结构”(hierarchical system) 不同的组织⽅式。在层次结构⽂件系统中，⽂件只能位于⼀个特定的⽬录下。如果在其它⽬录下需要引⽤此⽂件，通常需要特别的操作，如 Unix 系统上的硬或软链接。⽽在标签式⽂件系统中，对象可以附加任意数量的标签；然后可⽤特定的标签来寻找所有带此标签的对象。在更复杂的系统中，可以将标签的集合运算结果作为查询对象的标准。
⽽有别于传统的层次⽂件系统的标签⽂件系统对于⽤户⽽⾔，采取了不透明的存储结构，对于特定的⽂件，⽤户可以添加标签（tag）来对⽂件进⾏标识，并可以根据相关标签来对⽂件进⾏检索。

## 语义文件系统
语义⽂件系统是⼀种为系统提供灵活的关联访问的信息存储系统。通过从⽂件中⾃动提取其内容、属性、类型来确定并构建数据，⽽不是像当前⽂件系统那样依靠位置构建。这样的好处是可以提供对系统内容的灵活关联访问，⽽⾃动索引是在创建或更新⽂件或⽬录时执⾏的。

语义⽂件系统（SFS）的⽬标是⽤基于关联的⽅式替换基于位置的⽅式。SFS 开发了⼀种在 API 保持不变的情况下，仅改变系统调⽤的⾏为来提供对⽂件的关联访问。后⼀种策略的优点是标准应⽤程序能直接继承新的关联功能。当然，语义⽂件系统失去了原来的基于位置的⽂件访问⽅式。

由于语义⽂件系统与现有的树形结构⽂件系统兼容，因此语义⽂件系统的实现可以与现有的⽹络⽂件系统协议（如 NFS 和 AFS）完全兼容。NFS 兼容性允许现有客户端机器⽆需修改即可使⽤语义⽂件系统的索引和关联访问功能。通过 NFS 存储在语义⽂件系统中的⽂件将被⾃动编⼊索引，并且查询结果集将在 NFS 名称空间中显⽰为虚拟⽬录。这种⽅法通过允许将现有的 UNIX ⽂件服务器透明地转换为语义⽂件系统来直接解决现有 UNIX ⽂件系统的“dusty data”问题。

## 立项依据与工作
为了⽅便⽤户使⽤⽂件，许多的操作系统提供了很多⽂件搜索的应⽤程序（例如：Apple’s spotlight, Linux’s KDE Baloo, Windows Desktop Search），这些基于内容或⽂件名的搜索应⽤程序可以对普通⽤户有所帮助，但它们是建⽴在特定的操作系统基础之上，缺乏兼容性。⽽且⽤户对其搜索结果并不满意，因为它们的搜索结果是基于字符串匹配⽽⾮被搜索对象本⾝的属
性，即不符合语义搜索的要求。并且，这些搜索软件不提供对⽤户的⽂件数据进⾏分类的服务。

⼩组打算开发⼀种可视化的语义⽂件系统。该⽂件系统基于知识图谱的相关知识对计算机的个⼈⽂件数据进⾏表⽰。这项⼯作主要的⽬的在于弥补传统⽂件系统⽆法表⽰的复杂语义关系的缺陷。即使⽤基于知识的⽂档表⽰⽅案，使得⼀篇⽂章不再只是由⼀组代表词汇的字符串表⽰，⽽是由⽂章的实体及其复杂语义关系表⽰。

对于图⽂件系统来说，它会对放⼊其中的每⼀个⽂件进⾏关键词提取，并利⽤所有⽂件的关键词构建知识图谱，得到知识图谱后即可根据⽂件内容关键词进⾏检索，并且可以设置对同⼀关键词的⽂件进⾏预加载，可以提⾼⽂件读取速度。除此之外，可以通过知识图谱来构建可视化的关键词⽹络，通过关键词⽹络，⽤户可以⾼效地选取相关内容⽂件。

### 与分布式文件系统
图⽂件系统具有⼴阔的发展空间，不仅仅是个⼈电脑或是独⽴服务器可以使⽤图⽂件系统，对于应⽤范围越来越⼴的分布式⽂件系统，其也可以与图⽂件系统进⾏结合。利⽤图⽂件系统中的知识图谱，实现从分布式⽂件系统中根据内容关键词检索⽂件，也可以实现已打开⽂件的相关⽂件*预加载*，进⼀步加快分布式⽂件系统的读取速度。

## 相关工作
1. GFS: a Graph-based File System Enhanced with Semantic Features
2. 基于知识的图文档建模 (Knowledge-based Graph Document Modeling)
3. Graph-based Text Representation and Knowledge Discover
4. TagFS —Tag Semantics for Hierarchical File Systems

# 详细设计报告
## 总体架构
通过 FUSE 来实现⽂件系统，完成对⽂件的基本操作，将相关操作发送⾄ Server ，由 Server 对相关指令解码后对图数据库 Neo4j 进⾏相关节点的操作。⽤户可以通过 GBShell 来实现对数据库的检索与修改。具体模块功能介绍如下

### Fuse
* 为整个图⽂件系统提供⼀个底层⽂件系统，挂载点与 ext4 中某个⽂件夹有镜像关系；
* 为了保证 Neo4j 中的数据总是最新的，⽤户对⽂件的操作后，所产⽣的数据需要传送给 Neo4j。这⼀功能由 FUSE 发送给 Server 来完成；
* 根据⽂件名及其后缀，把不重要的⽂件进⾏筛除，只发送给 Neo4j ⼀ 些⽐较重要或者⽤户经常使⽤的⽂件。例如，.dll，.swp 后缀名⽂件就会被筛出，⽽对.pdf，.ppt，.doc 的⽂件的操作，FUSE 就会把数据发送给 Server；
* 引⼊推荐模块（Recommend），对服务端 (Server) 发出推荐请求；
* 通信⽅式——socket 信道。在⽤户对⽂件系统中的⽂件进⾏创建、删除、重命名、打开、更改权限等操作时，⽂件系统会把更新的信息传给Server，由 Server 对 Neo4j 进⾏修改，以使 Neo4j 中的数据保持最新。

### 知识图谱
* 是以 RDF 三元组的模式存储数据，与图等价，能迅速有效地查找到与⼀个数据相连结的关联内容。
* 利⽤知识图谱可以对文件系统中的文件作出⼀些初始的属性判断，在⽣成或放⼊⽂件的同时调⽤知识图谱，从其名称中推测出可能发⽣关联的⽅向以及类型。
* 使⽤的知识图谱为复旦⼤学提供的中⽂知识库 CN-DBpedia

### Neo4j 与 Py2Neo
* Neo4j 是我们为了实现图⽂件系统对⽂件的“图”逻辑关系存储⽽选择的图数据库，或者也可以称为“关系数据库”。
* 我们采⽤的 Neo4j 的接⼜为 Py2Neo，Py2Neo 是⼀个 python 语⾔操作 Neo4j 的⼯具包，提供了很多⾼级的 API，

## 可扩展性
1. 分布式图文件系统
2. 从底层实现预读操作
3. 推荐算法优化
4. 根据需要采用更合适的知识图谱